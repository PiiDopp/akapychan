{
  "run_index": 1,
  "source_file": "leetcode519.json",
  "problem_index_in_file": 0,
  "problem_data": {
    "title": "Random Flip Matrix",
    "description": "There is an m x n binary grid matrix with all the values set 0 initially. Design an algorithm to randomly pick an index (i, j) where matrix[i][j] == 0 and flips it to 1. All the indices (i, j) where matrix[i][j] == 0 should be equally likely to be returned.\n\nOptimize your algorithm to minimize the number of calls made to the built-in random function of your language and optimize the time and space complexity.\n\nImplement the Solution class:\n\nSolution(int m, int n) Initializes the object with the size of the binary matrix m and n.\nint[] flip() Returns a random index [i, j] of the matrix where matrix[i][j] == 0 and flips it to 1.\nvoid reset() Resets all the values of the matrix to be 0.",
    "examples": [
      {
        "input": "[\"Solution\", \"flip\", \"flip\", \"flip\", \"reset\", \"flip\"], [[3, 1], [], [], [], [], []]",
        "output": "[null, [1,0], [2,0], [0,0], null, [2,0]]",
        "explanation": "Solution solution = new Solution(3, 1);\nsolution.flip();  // return [1,0], [0,0], [1,0], and [2,0] should be equally likely to be returned.\nsolution.flip();  // return [2,0], Since [1,0] was returned, [2,0] and [0,0]\nsolution.flip();  // return [0,0], Based on the previously returned indices, only [0,0] can be returned.\nsolution.reset(); // All the values are reset to 0 and can be returned.\nsolution.flip();  // return [2,0], [0,0], [1,0], and [2,0] should be equally likely to be returned."
      }
    ],
    "solution": "import random\n\nclass Solution:\n\n    def __init__(self, n_rows, n_cols):\n        self.rows = n_rows\n        self.cols = n_cols\n        self.total = n_rows * n_cols\n        self.flipped = {}\n\n    def flip(self):\n        r = random.randint(0, self.total - 1)\n        x = self.flipped.get(r, r)\n        self.total -= 1\n        self.flipped[r] = self.flipped.get(self.total, self.total)\n        return [x // self.cols, x % self.cols]\n\n    def reset(self):\n        self.total = self.rows * self.cols\n        self.flipped.clear()"
  },
  "experiment_result": {
    "success": false,
    "error": "AI 未生成任何有效測資",
    "generated_tests": [
      {
        "description": "單元格矩陣（1x1）",
        "input": {
          "m": 1,
          "n": 1,
          "operations": [
            "flip",
            "reset",
            "flip"
          ]
        },
        "expected_output": [
          [
            0,
            0
          ],
          null,
          [
            0,
            0
          ]
        ]
      },
      {
        "description": "2x2 矩陣翻轉所有格子",
        "input": {
          "m": 2,
          "n": 2,
          "operations": [
            "flip",
            "flip",
            "flip",
            "flip"
          ]
        },
        "expected_output": "any permutation of [[0,0],[0,1],[1,0],[1,1]]"
      },
      {
        "description": "3x3 矩陣部分翻轉後 reset",
        "input": {
          "m": 3,
          "n": 3,
          "operations": [
            "flip",
            "flip",
            "reset",
            "flip"
          ]
        },
        "expected_output": "any index within 0-2 range"
      }
    ],
    "parsed_tests": [],
    "runlog": "",
    "all_passed": false,
    "total_tests": 0,
    "passed_count": 0,
    "accuracy_rate": 0.0
  }
}